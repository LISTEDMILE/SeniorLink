{% extends 'base.html' %}

{% block content %}
<h2>Available Projects</h2>

{% for project in projects %}
<div style="
    border:1px solid #ddd;
    border-radius:10px;
    padding:20px;
    margin-bottom:20px;
    background:#f9f9f9;
">

    <!-- TITLE -->
    <h3>{{ project.title }}</h3>

    <!-- SHORT DESCRIPTION -->
    {% if project.short_description %}
        <p><i>{{ project.short_description }}</i></p>
    {% endif %}

    <!-- BASIC INFO -->
    <p><strong>Faculty:</strong> {{ project.faculty.username }}</p>
    <p><strong>Domain:</strong> {{ project.get_domain_display }}</p>
    <p><strong>Difficulty:</strong> {{ project.get_difficulty_level_display }}</p>
    <p><strong>Status:</strong> {{ project.get_status_display }}</p>

    <!-- TIMELINE -->
    {% if project.start_date %}
        <p>
            <strong>Timeline:</strong>
            {{ project.start_date }} â†’
            {{ project.end_date|default:"Ongoing" }}
        </p>
    {% endif %}

    <!-- TECHNOLOGIES -->
    {% if project.technologies %}
        <p><strong>Technologies:</strong> {{ project.technologies }}</p>
    {% endif %}

    <!-- DESCRIPTION -->
    {% if project.description %}
        <p>{{ project.description }}</p>
    {% endif %}

    <!-- LINKS -->
    {% if project.github_link %}
        <p>
            ğŸ”— <a href="{{ project.github_link }}" target="_blank">GitHub Repository</a>
        </p>
    {% endif %}

    {% if project.documentation_link %}
        <p>
            ğŸ“„ <a href="{{ project.documentation_link }}" target="_blank">Documentation</a>
        </p>
    {% endif %}

    <!-- STUDENT / ALUMNI COUNTS -->
    <p>
        ğŸ‘¨â€ğŸ“ Students: {{ project.students.count }} / {{ project.max_students }} |
        ğŸ‘¨â€ğŸ« Alumni Mentors: {{ project.alumni.count }}
    </p>

    <hr>

    <!-- JOIN LOGIC -->
    {% if user in project.alumni.all %}
        <p style="color:green;"><strong>âœ… You are mentoring this project</strong></p>
    {% else %}
        {% if project.is_public and project.status != 'completed' %}
            <a href="{% url 'join_project_as_alumni' project.id %}">
                ğŸ¤ Join as Mentor
            </a>
        {% else %}
            <p style="color:gray;">Not open for joining</p>
        {% endif %}
    {% endif %}

</div>
{% empty %}
<p>No projects available at the moment.</p>
{% endfor %}

{% endblock %}
