{% extends 'base.html' %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/student_dashboard.css' %}">

<h2 class="page-title">Find Alumni Mentors</h2>

{% for alumni in alumni_profiles %}
<div class="alumni-card">

    <!-- HEADER -->
    <div class="alumni-header">
        <h3>{{ alumni.user.username }}</h3>
        {% if alumni.alumniprofile.available_for_mentorship %}
            <span class="badge available">Available</span>
        {% else %}
            <span class="badge unavailable">Unavailable</span>
        {% endif %}
    </div>

    <!-- DETAILS -->
    {% if alumni.alumniprofile %}
    <div class="alumni-details">
        <p><strong>Company:</strong> {{ alumni.alumniprofile.company_name|default:"‚Äî" }}</p>
        <p><strong>Role:</strong> {{ alumni.alumniprofile.current_role|default:"‚Äî" }}</p>
        <p><strong>Domain:</strong> {{ alumni.alumniprofile.domain|default:"‚Äî" }}</p>

        {% if alumni.alumniprofile.experience_years %}
            <p><strong>Experience:</strong> {{ alumni.alumniprofile.experience_years }} years</p>
        {% endif %}

        {% if alumni.alumniprofile.expertise %}
            <p><strong>Expertise:</strong> {{ alumni.alumniprofile.expertise }}</p>
        {% endif %}
    </div>
    {% endif %}

    <hr>

    <!-- ACTIONS -->
    <div class="actions">

        <a href="{% url 'view_profile' alumni.user.id %}" class="link">
            üë§ View Profile
        </a>

        {% if alumni.request_status == 'pending' %}
            <span class="status pending">‚è≥ Request Pending</span>

        {% elif alumni.request_status == 'accepted' %}
            <span class="status accepted">‚úÖ Accepted</span>

        {% else %}
            {% if alumni.alumniprofile.available_for_mentorship %}
                <a href="{% url 'send_mentorship_request' alumni.user.id %}" class="btn">
                    ü§ù Request Mentorship
                </a>
            {% else %}
                <span class="status disabled">Not accepting requests</span>
            {% endif %}
        {% endif %}
    </div>

</div>
{% empty %}
<p class="empty">No alumni available.</p>
{% endfor %}

{% endblock %}
